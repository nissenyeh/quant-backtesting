# è‚¡å¸‚ç†Šå¸‚ï¼ˆç¶“æ¿Ÿè¡°é€€å‹ç†Šå¸‚ vs éç¶“æ¿Ÿè¡°é€€å‹ç†Šå¸‚ï¼‰åˆ†æ

åˆ†æ 1970-2026 å¹´ S&P 500 çš„ç†Šå¸‚ï¼ˆè·Œå¹… â‰¥ 20%ï¼‰ï¼Œä¸¦èˆ‡ NBER ç¶“æ¿Ÿè¡°é€€é€±æœŸå°ç…§ã€‚

---

## ç ”ç©¶å‹•æ©Ÿ

åœ¨äº†è§£ã€Œç¶“æ¿Ÿå¾ªç’°é€±æœŸã€ï¼ˆç¶“æ¿Ÿå¾©ç”¦-> æˆé•· -> æ¦®æ™¯ -> è¡°é€€ï¼‰çš„æ¦‚å¿µå¾Œï¼Œæƒ³è¦ç ”ç©¶çœ‹çœ‹
- å¤šæ•¸ç†Šå¸‚é€šå¸¸ä¼´éš¨ã€Œç¶“æ¿Ÿè¡°é€€ã€å—ï¼Ÿå¤šå°‘æ¯”ä¾‹çš„ç†Šå¸‚æ˜¯ä¾†è‡ªã€Œç¶“æ¿Ÿè¡°é€€ã€ï¼Ÿ
- éç¶“æ¿Ÿè¡°é€€å‹ç†Šå¸‚æ˜¯å¦å›å½ˆçš„è¼ƒå¿«ï¼Ÿï¼ˆä¾‹å¦‚ï¼šé»‘å¤©éµäº‹ä»¶ï¼‰
- ç¶“æ¿Ÿè¡°é€€å‹ç†Šå¸‚ vs éç¶“æ¿Ÿè¡°é€€å‹ç†Šå¸‚ å…©è€…åˆ°åº•æ™‚é–“å·®å¤šå°‘ï¼Ÿ 
- ç¶“æ¿Ÿè¡°é€€å‹ç†Šå¸‚ vs éç¶“æ¿Ÿè¡°é€€å‹ç†Šå¸‚ å…©è€…æœ€ä½³è²·é»ä¸åŒå—ï¼Ÿ
- å‡è¨­å¯ä»¥é æ¸¬ã€Œç¶“æ¿Ÿè¡°é€€ã€ï¼Œæ˜¯å¦æœ‰æ©Ÿæœƒå¯ä»¥é æ¸¬ç†Šå¸‚ï¼Ÿ

## èƒŒæ™¯èˆ‡å®šç¾©


### ç¶“æ¿Ÿè¡°é€€ â‰  è‚¡å¸‚ç†Šå¸‚


| æ¦‚å¿µ | å®šç¾© | èªå®šæ©Ÿæ§‹ | ç‰¹æ€§ |
|------|------|---------|------|
| **è‚¡å¸‚ç†Šå¸‚** | è‚¡åƒ¹å¾é«˜é»ä¸‹è·Œ â‰¥ 20% | å¸‚å ´æ…£ä¾‹ | å³æ™‚å¯è§€æ¸¬ |
| **ç¶“æ¿Ÿè¡°é€€** | GDP é€£çºŒå…©å­£è² æˆé•·ï¼ˆæŠ€è¡“å®šç¾©ï¼‰ï¼Œæˆ– NBER ç¶œåˆåˆ¤æ–· | NBER åœ‹å®¶ç¶“æ¿Ÿç ”ç©¶é™¢ | æ»¯å¾ŒæŒ‡æ¨™ï¼Œé€šå¸¸çµæŸå¾Œ 6-12 æœˆæ‰å®£å¸ƒï¼Œä½†ã€Œæœ‰æ©Ÿæœƒã€é€éé ˜å…ˆæŒ‡æ¨™é ï¼ˆå¤±æ¥­ç‡ã€æ¶ˆè²»è€…ä¿¡å¿ƒæŒ‡æ•¸ã€æ®–åˆ©ç‡...etcï¼‰å…ˆè§€æ¸¬ |



### è¡°é€€å‹ç†Šå¸‚ vs éè¡°é€€å‹ç†Šå¸‚

æœ¬ç ”ç©¶å°‡ç†Šå¸‚åˆ†ç‚ºå…©é¡ï¼š

| é¡å‹ | å®šç¾© | ç¯„ä¾‹ | ç‰¹å¾µ |
|------|------|------|------|
| **è¡°é€€å‹ç†Šå¸‚** | ç†Šå¸‚æœŸé–“æœ‰å°æ‡‰çš„ NBER ç¶“æ¿Ÿè¡°é€€ | 2008 é‡‘èæµ·å˜¯ã€2000 ç¶²è·¯æ³¡æ²«ã€2020 COVID | è·Œå¹…æ·±ã€æ¢å¾©æ…¢ |
| **éè¡°é€€å‹ç†Šå¸‚** | ç†Šå¸‚æœŸé–“ç„¡å°æ‡‰çš„ç¶“æ¿Ÿè¡°é€€ | 1987 é»‘è‰²æ˜ŸæœŸä¸€ã€2022 Fed å‡æ¯ | è·Œå¹…æ·ºã€æ¢å¾©å¿« |

**ç‚ºä»€éº¼é€™å€‹åˆ†é¡é‡è¦ï¼Ÿ**
- å…©ç¨®ç†Šå¸‚çš„**è·Œå¹…ã€æ¢å¾©æ™‚é–“ã€æœ€ä½³è²·é»**å¯èƒ½ä¸åŒ
- é€é**é ˜å…ˆæŒ‡æ¨™**ï¼ˆæ®–åˆ©ç‡æ›²ç·šã€å¤±æ¥­ç‡ï¼‰æœ‰æ©Ÿæœƒå¯ä»¥é åˆ¤é¡å‹
- ä¸åŒé¡å‹å¯èƒ½éœ€è¦**ä¸åŒçš„æ“ä½œç­–ç•¥**

---

## ç ”ç©¶çµè«–

ğŸ‘‰ **[å®Œæ•´åˆ†æå ±å‘Š](./report.md)**

### é—œéµç™¼ç¾

| ç ”ç©¶ä¸»è¦å•é¡Œ | çµè«– |
|------|------|
| å¤šæ•¸ç†Šå¸‚é€šå¸¸ä¼´éš¨è¡°é€€å—ï¼Ÿ | **æ˜¯**ï¼Œ80% æœ‰å°æ‡‰è¡°é€€ |
| éè¡°é€€å‹ç†Šå¸‚æ˜¯å¦å›å½ˆè¼ƒå¿«ï¼Ÿ | **æ˜¯**ï¼Œæ¢å¾© 464 å¤© vs è¡°é€€å‹ 1,107 å¤© |
| å…©è€…åˆ°åº•æ™‚é–“å·®å¤šå°‘ï¼Ÿ | è¡°é€€å‹å¹³å‡ **446 å¤©**ï¼Œéè¡°é€€å‹ **139 å¤©**ï¼ˆå¿« 3.2 å€ï¼‰ |
| å…©è€…æœ€ä½³è²·é»ä¸åŒå—ï¼Ÿ | **æ˜¯**ï¼Œéè¡°é€€å‹ -20% è²·å…¥ï¼ˆå ±é…¬ +4.6%ï¼‰ï¼Œè¡°é€€å‹ -30% è²·å…¥ï¼ˆå ±é…¬ +27.9%ï¼‰ |
| å‡è¨­å¯ä»¥é æ¸¬è¡°é€€ï¼Œæ˜¯å¦å¯ä»¥é æ¸¬ç†Šå¸‚ï¼Ÿ | å¯é æ¸¬ 80% ç†Šå¸‚ï¼Œä½†æœƒæ¼æ‰ 1987ã€2022 |

### è¿‘ 20 å¹´ç†Šå¸‚ç¸½è¦½

| æœŸé–“ | è·Œå¹… | é¡å‹ | åˆ°åº• | æ¢å¾© | äº‹ä»¶ |
|------|------|------|------|------|------|
| 2007 â†’ 2009 | -57% | è¡°é€€å‹ | 517å¤© | 1,480å¤© | é‡‘èæµ·å˜¯ |
| 2000 â†’ 2002 | -49% | è¡°é€€å‹ | 929å¤© | 1,694å¤© | ç¶²è·¯æ³¡æ²« |
| 2020-02 â†’ 2020-03 | -34% | è¡°é€€å‹ | **33å¤©** | **148å¤©** | COVID |
| 2022 | -25% | **éè¡°é€€å‹** | 282å¤© | 464å¤© | Fed å‡æ¯ |
| 2025 | -19% | *(æœªé”ç†Šå¸‚)* | 48å¤© | 80å¤© | å·æ™®é—œç¨… |

### è¡°é€€å‹ vs éè¡°é€€å‹

| æŒ‡æ¨™ | è¡°é€€å‹ | éè¡°é€€å‹ |
|------|--------|---------|
| å¹³å‡è·Œå¹… | -47% | -25% |
| å¹³å‡æ¢å¾© | 1,107 å¤© | 464 å¤© |

### å»ºè­°ç­–ç•¥

#### ç´…ç¶ ç‡ˆæ±ºç­–è¡¨

æ ¹æ“š**é ˜å…ˆæŒ‡æ¨™**åˆ¤æ–·ç†Šå¸‚é¡å‹ï¼Œå†æ±ºå®šè²·å…¥æ™‚æ©Ÿï¼š

| é ˜å…ˆæŒ‡æ¨™ç‹€æ…‹ | ç‡ˆè™Ÿ | åˆ¤æ–· | è²·å…¥æ™‚æ©Ÿ | ç†ç”± |
|-------------|------|------|---------|------|
| æ®–åˆ©ç‡æ›²ç·šæ­£å¸¸ + å¤±æ¥­ç‡ç©©å®š | ğŸŸ¢ | éè¡°é€€å‹ | **-20%** é–‹å§‹è²· | å¹³å‡è·Œ -25%ï¼Œæ­·å²ä¸Š -20% å³å¯é€²å ´ |
| æ®–åˆ©ç‡æ›²ç·šå€’æ› æˆ– å¤±æ¥­ç‡å‰›é–‹å§‹ä¸Šå‡ | ğŸŸ¡ | å¯èƒ½è¡°é€€ | **-25%** é–‹å§‹è²· | ä¿å®ˆç­‰å¾…ï¼Œé¿å…å¤ªæ—©é€²å ´ |
| å·²ç¢ºèªè¡°é€€ï¼ˆNBER å®£å¸ƒï¼‰| ğŸ”´ | ç¢ºèªè¡°é€€ | **-30%** é–‹å§‹è²· | å¹³å‡è·Œ -47%ï¼Œéœ€è¦æ›´å¤§å®‰å…¨é‚Šéš› |

#### åˆ†æ‰¹è²·å…¥ç­–ç•¥

| é¡å‹ | è·Œå¹… | å»ºè­°å‹•ä½œ | ç´¯è¨ˆéƒ¨ä½ |
|------|------|---------|---------|
| ğŸŸ¢ éè¡°é€€å‹ | -20% | è²·å…¥ 1/3 | 33% |
| | -22% | è²·å…¥ 1/3 | 67% |
| | -25% | è²·å…¥ 1/3 | 100% |
| ğŸ”´ è¡°é€€å‹ | -30% | è²·å…¥ 1/4 | 25% |
| | -35% | è²·å…¥ 1/4 | 50% |
| | -40% | è²·å…¥ 1/4 | 75% |
| | -45% | è²·å…¥ 1/4 | 100% |

#### æ•¸æ“šé©—è­‰

| ç­–ç•¥ | å‹ç‡ | å¹³å‡å ±é…¬ | æœ€å¤§è™§æ |
|------|------|---------|---------|
| éè¡°é€€å‹ -20% è²·å…¥ | **100%** | +4.6% | 0% |
| è¡°é€€å‹ -30% è²·å…¥ | **100%** | +27.9% | 0% |

> è©³ç´°é©—è­‰æ•¸æ“šè«‹åƒé–± [å®Œæ•´åˆ†æå ±å‘Š](./report.md)

---

## ç›®éŒ„çµæ§‹

```
bear_market_analysis/
â”œâ”€â”€ readme.md                           # æœ¬èªªæ˜æ–‡ä»¶
â”œâ”€â”€ report.md                           # å®Œæ•´åˆ†æå ±å‘Š
â”œâ”€â”€ input_SP500_daily_yahoo.csv         # è¼¸å…¥ï¼šS&P 500 æ—¥æ•¸æ“šï¼ˆ1970-2026ï¼‰
â”œâ”€â”€ input_SPæŒ‡æ•¸(Shilleræ•¸æ“šï¼‰.csv       # è¼¸å…¥ï¼šShiller æœˆæ•¸æ“šï¼ˆ1871-2023ï¼‰
â”œâ”€â”€ input_ç¾åœ‹æ™¯æ°£å¾ªç’°å®Œæ•´å¹´è¡¨_NBER.xlsx  # è¼¸å…¥ï¼šNBER ç¶“æ¿Ÿé€±æœŸ
â”œâ”€â”€ output_è‚¡å¸‚ç†Šå¸‚çµ±è¨ˆ_æ—¥æ•¸æ“š.xlsx       # è¼¸å‡ºï¼šç†Šå¸‚çµ±è¨ˆï¼ˆæ—¥æ•¸æ“šï¼‰
â”œâ”€â”€ output_è‚¡å¸‚ç†Šå¸‚çµ±è¨ˆ.xlsx             # è¼¸å‡ºï¼šç†Šå¸‚çµ±è¨ˆï¼ˆæœˆæ•¸æ“šï¼‰
â””â”€â”€ output_ç†Šå¸‚èˆ‡è¡°é€€å°ç…§.xlsx           # è¼¸å‡ºï¼šç†Šå¸‚èˆ‡è¡°é€€å°ç…§è¡¨
```

---

## å®šç¾©

### ç†Šå¸‚å®šç¾©

| æ¢ä»¶ | é–¾å€¼ |
|------|------|
| é€²å…¥ç†Šå¸‚ | å¾é«˜é»ä¸‹è·Œ **â‰¥ 20%** |
| ç†Šå¸‚çµæŸ | å¾ä½é»åå½ˆ **â‰¥ 20%** |

### æ¢å¾©å®šç¾©

- **å¾ä½é»å›åˆ°ã€ŒåŸæœ¬è·Œä¸‹å»çš„é«˜é»ã€**ï¼ˆä¸æ˜¯å‰µæ–°é«˜ï¼‰

---

## è³‡æ–™ä¾†æº

| è³‡æ–™ | ä¾†æº | èªªæ˜ |
|------|------|------|
| S&P 500 æ—¥æ•¸æ“š | [Yahoo Finance](https://finance.yahoo.com/quote/%5EGSPC/history/) | 1970 å¹´èµ·ï¼Œç”¨æ–¼ç²¾ç¢ºè¨ˆç®—ç†Šå¸‚ |
| S&P 500 æœˆæ•¸æ“š | [Robert Shiller](http://www.econ.yale.edu/~shiller/data.htm) | 1871 å¹´èµ·ï¼Œé•·æœŸæ­·å²åˆ†æ |
| ç¶“æ¿Ÿé€±æœŸ | [NBER](https://www.nber.org/research/data/us-business-cycle-expansions-and-contractions) | å®˜æ–¹è¡°é€€èªå®š |

---

## å¦‚ä½•æ›´æ–°è³‡æ–™

### 1. æ›´æ–° S&P 500 æ—¥æ•¸æ“š

```bash
pip install yfinance
```

```python
import yfinance as yf

# ä¸‹è¼‰ S&P 500 æ—¥æ•¸æ“š
sp500 = yf.download("^GSPC", start="1970-01-01")
sp500.to_csv('input_SP500_daily_yahoo.csv')
print(f"ä¸‹è¼‰å®Œæˆï¼Œå…± {len(sp500)} ç­†")
```

### 2. æ›´æ–° Shiller æœˆæ•¸æ“š

1. å‰å¾€ [Shiller Data](http://www.econ.yale.edu/~shiller/data.htm)
2. ä¸‹è¼‰ `ie_data.xls`
3. æå– `Real Price` æ¬„ä½ï¼Œå¦å­˜ç‚º `input_SPæŒ‡æ•¸(Shilleræ•¸æ“šï¼‰.csv`

### 3. æ›´æ–° NBER ç¶“æ¿Ÿé€±æœŸ

1. å‰å¾€ [NBER Business Cycle Dating](https://www.nber.org/research/data/us-business-cycle-expansions-and-contractions)
2. ç¢ºèªæ˜¯å¦æœ‰æ–°çš„ç¶“æ¿Ÿé€±æœŸå…¬å‘Šï¼ˆé«˜å³°/è°·åº•æ—¥æœŸï¼‰
3. æ›´æ–° `input_ç¾åœ‹æ™¯æ°£å¾ªç’°å®Œæ•´å¹´è¡¨_NBER.xlsx`

> **æ³¨æ„**ï¼šNBER é€šå¸¸åœ¨è¡°é€€çµæŸå¾Œ 6-12 å€‹æœˆæ‰æœƒæ­£å¼å®£å¸ƒé€±æœŸæ—¥æœŸã€‚

---

## å¦‚ä½•é‡è·‘åˆ†æ

### ä½¿ç”¨ Claude Code

å°‡ä»¥ä¸‹ prompt è²¼åˆ° Claude Codeï¼š

```
è«‹æ ¹æ“š bear_market_analysis è³‡æ–™å¤¾é‡æ–°åˆ†æç†Šå¸‚ï¼š

1. è®€å– input_SP500_daily_yahoo.csvï¼ˆæ—¥æ•¸æ“šï¼‰
2. è¨ˆç®—æ‰€æœ‰ç†Šå¸‚ï¼ˆè·Œå¹… >= 20%ï¼Œåå½ˆ >= 20% çµæŸï¼‰
3. è¨˜éŒ„æ¯æ¬¡ç†Šå¸‚ï¼š
   - é«˜é»æ—¥æœŸã€ä½é»æ—¥æœŸ
   - æœ€å¤§è·Œå¹…
   - åˆ°åº•å¤©æ•¸ï¼ˆé«˜é»åˆ°ä½é»ï¼‰
   - æ¢å¾©å¤©æ•¸ï¼ˆä½é»åˆ°å›å¾©åŸé«˜é»ï¼‰
4. èˆ‡ NBER ç¶“æ¿Ÿé€±æœŸå°ç…§ï¼Œæ¨™è¨˜è¡°é€€å‹/éè¡°é€€å‹
5. åˆ†æï¼š
   - è¡°é€€å‹ vs éè¡°é€€å‹çš„æ¯”ä¾‹
   - è¿‘ 20 å¹´å„ç†Šå¸‚çš„åˆ°åº•æ™‚é–“ã€æ¢å¾©æ™‚é–“
   - å¹³å‡è·Œå¹…ã€å¹³å‡æ¢å¾©æ™‚é–“æ¯”è¼ƒ
6. æ›´æ–° report.md å’Œè¼¸å‡º Excel
```

### æ‰‹å‹•åŸ·è¡Œ Python

```python
import pandas as pd
import yfinance as yf

# 1. ä¸‹è¼‰æ•¸æ“š
sp500 = yf.download("^GSPC", start="1970-01-01")
sp500.to_csv('input_SP500_daily_yahoo.csv')

# 2. è®€å–æ•¸æ“š
df = pd.read_csv('input_SP500_daily_yahoo.csv', skiprows=[1, 2])
df.columns = ['Date', 'Close', 'High', 'Low', 'Open', 'Volume']
df['Date'] = pd.to_datetime(df['Date'])
df['price'] = pd.to_numeric(df['Close'], errors='coerce')
df = df.dropna(subset=['price']).sort_values('Date').reset_index(drop=True)

# 3. è¨ˆç®—ç†Šå¸‚ï¼ˆæ ¸å¿ƒé‚è¼¯ï¼‰
bear_markets = []
i = 0
n = len(df)

while i < n:
    peak_idx = i
    peak_price = df.loc[i, 'price']
    peak_date = df.loc[i, 'Date']

    j = i + 1
    while j < n:
        if df.loc[j, 'price'] > peak_price:
            peak_idx = j
            peak_price = df.loc[j, 'price']
            peak_date = df.loc[j, 'Date']
            j += 1
        else:
            current_dd = (df.loc[j, 'price'] - peak_price) / peak_price
            if current_dd <= -0.20:
                # é€²å…¥ç†Šå¸‚ï¼Œæ‰¾ä½é»
                trough_idx = j
                trough_price = df.loc[j, 'price']
                trough_date = df.loc[j, 'Date']

                k = j + 1
                while k < n:
                    if df.loc[k, 'price'] < trough_price:
                        trough_idx = k
                        trough_price = df.loc[k, 'price']
                        trough_date = df.loc[k, 'Date']
                    rebound = (df.loc[k, 'price'] - trough_price) / trough_price
                    if rebound >= 0.20:
                        break
                    k += 1

                # æ‰¾æ¢å¾©æ—¥æœŸ
                post_trough = df[df['Date'] > trough_date]
                recovered = post_trough[post_trough['price'] >= peak_price]
                recovery_date = recovered.iloc[0]['Date'] if len(recovered) > 0 else None

                bear_markets.append({
                    'é«˜é»æ—¥æœŸ': peak_date.strftime('%Y-%m-%d'),
                    'ä½é»æ—¥æœŸ': trough_date.strftime('%Y-%m-%d'),
                    'æœ€å¤§è·Œå¹…(%)': round((trough_price - peak_price) / peak_price * 100, 2),
                    'åˆ°åº•å¤©æ•¸': (trough_date - peak_date).days,
                    'æ¢å¾©æ—¥æœŸ': recovery_date.strftime('%Y-%m-%d') if recovery_date else None,
                    'æ¢å¾©å¤©æ•¸': (recovery_date - trough_date).days if recovery_date else None,
                })

                i = trough_idx + 1
                break
            j += 1
        if j >= n:
            i = n
            break
    else:
        i += 1

# 4. è¼¸å‡ºçµæœ
result_df = pd.DataFrame(bear_markets)
result_df.to_excel('output_è‚¡å¸‚ç†Šå¸‚çµ±è¨ˆ_æ—¥æ•¸æ“š.xlsx', index=False)
print(result_df)
```

---

## ç ”ç©¶é™åˆ¶

1. **æœˆåº¦æ•¸æ“šæ¼æ‰å¿«é€Ÿç†Šå¸‚**ï¼šCOVIDï¼ˆ33å¤©ï¼‰åœ¨æœˆåº¦æ•¸æ“šä¸­åªé¡¯ç¤º -19%ï¼Œéœ€ç”¨æ—¥æ•¸æ“š
2. **NBER èªå®šå»¶é²**ï¼šè¡°é€€é€šå¸¸åœ¨çµæŸå¾Œ 6-12 æœˆæ‰æ­£å¼å®£å¸ƒ
3. **åƒ…åˆ†æç¾åœ‹å¸‚å ´**ï¼šå…¶ä»–å¸‚å ´å¯èƒ½æœ‰ä¸åŒçµæœ
4. **å®šç¾©æ•æ„Ÿæ€§**ï¼š-20% é–¾å€¼æ˜¯æ…£ä¾‹ï¼Œéçµ•å°æ¨™æº–
